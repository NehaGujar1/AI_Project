<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="wildfire.css">
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
</head>
<body id="bg" style="font-family: 'Comic Sans MS';">
    <div class="add_space"></div>
    <div id="divi"><h1><p id="main_text">Enter rainfall in ml</p></h1></div>
    <input style="justify-self: center;margin: auto; display: block; height: 4vh; width: 10vw; background-color: #ffffffaf; font-size: 2vh; text-align: center;" type="text" id="Temperature" />
    <input style="justify-self: center;margin: auto; display: block; height: 4vh; width: 10vw; background-color: #ffffffaf; font-size: 2vh; text-align: center;" type="text" id="RH" />
    <input style="justify-self: center;margin: auto; display: block; height: 4vh; width: 10vw; background-color: #ffffffaf; font-size: 2vh; text-align: center;" type="text" id="Ws" />
    <input style="justify-self: center;margin: auto; display: block; height: 4vh; width: 10vw; background-color: #ffffffaf; font-size: 2vh; text-align: center;" type="text" id="Rain" />
    <input style="justify-self: center;margin: auto; display: block; height: 4vh; width: 10vw; background-color: #ffffffaf; font-size: 2vh; text-align: center;" type="text" id="FFMC" />
    <input style="justify-self: center;margin: auto; display: block; height: 4vh; width: 10vw; background-color: #ffffffaf; font-size: 2vh; text-align: center;" type="text" id="DMC" />
    <input style="justify-self: center;margin: auto; display: block; height: 4vh; width: 10vw; background-color: #ffffffaf; font-size: 2vh; text-align: center;" type="text" id="DC" />
    <input style="justify-self: center;margin: auto; display: block; height: 4vh; width: 10vw; background-color: #ffffffaf; font-size: 2vh; text-align: center;" type="text" id="ISI" />
    <input style="justify-self: center;margin: auto; display: block; height: 4vh; width: 10vw; background-color: #ffffffaf; font-size: 2vh; text-align: center;" type="text" id="BUI" />
    <input style="justify-self: center;margin: auto; display: block; height: 4vh; width: 10vw; background-color: #ffffffaf; font-size: 2vh; text-align: center;" type="text" id="FWI" />
    <div class="add_space2"></div>
    <button style="justify-self: center;margin: auto; display: block; height: 4vh; width: 10vw; background-color: #ffffffaf; font-weight: bolder; font-size: 2vh;" type="button" id="makeprediction">PREDICT</button>
    <p id="wild"></p>
    <!-- <script>
    function takeInput() {
        let x = document.getElementById("rain_val").value;
        console.log(x)
    }
    </script> -->
    <py-env>
        - numpy
        - pandas
        - sklearn
        - seaborn
        - matplotlib.pyplot
    </py-env>
    <py-script>
        # -*- coding: utf-8 -*-
"""Wildfire.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/19YCecDDTwbJPaCflr2zHIQxFwVkyDzKb
"""

# Commented out IPython magic to ensure Python compatibility.
from js import (
            document,
            Blob,
            URL
        )
from pyodide import create_proxy
def inputvals():
    Temperature = document.getElementById("Temperature")
    RH = document.getElementById("RH")
    Ws = document.getElementById("Ws")
    Rain = document.getElementById("Rain")
    FFMC = document.getElementById("FFMC")
    DMC = document.getElementById("DMC")
    DC = document.getElementById("DC")
    ISI = document.getElementById("ISI")
    BUI = document.getElementById("BUI")
    FWI = document.getElementById("FWI")
    inputval = [Temperature,  RH, Ws, Rain , FFMC, DMC, DC, ISI, BUI, FWI]
    predictvals
e = document.getElementById("makeprediction")
e.addEventListener("click",create_proxy(inputvals))
import pandas as pd
import matplotlib.pyplot as plt
import numpy as np
import seaborn as sns
from sklearn.preprocessing import LabelEncoder
def predictvals(inputval):
    le = LabelEncoder()
    # %matplotlib inline
    data1 = pd.read_csv('Algerian_forest_fires_dataset_UPDATE.csv')
    # data1["area"].max()
    data1 = data1.drop(columns=["month","day","year"])
    # data1=data1.dropna()
    data1 = data1[data1['Classes  '].notna()]
    data1 = data1.replace({'Classes  ': {'fire   ': 1, 'not fire    ': 0, 'not fire     ': 0, 'not fire   ': 0}})
    print(data1.columns.tolist())
    # data1["Classes  "] = le.fit_transform(data1["Classes  "])
    x3 = data1.drop(columns=["Classes  "])
    y3 = data1["Classes  "]
    data1.head()

    myset = set(data1["Classes  "])
    print(myset)

    #sns.heatmap(data1.corr())

    from sklearn import linear_model
    data1le = data1
    # data1le.st = le.fit_transform(data1le.st)
    X = x3
    Y = y3
    from sklearn.model_selection import train_test_split
    x_train, x_test, y_train, y_test = train_test_split(X,Y,test_size=0.2)
    reg = linear_model.LinearRegression()
    reg.fit(x_train,y_train)
    print("Linear Classification Accuracy: {:.4f}%".format(reg.score(x_test, y_test) * 100))
    # reg.coef_
    # reg.intercept_
    # reg.predict([[42,43,10]])
    reg.score(x_test,y_test)

    from sklearn.linear_model import LogisticRegression
    md = LogisticRegression()
    from sklearn.model_selection import train_test_split
    x_train, x_test, y_train, y_test = train_test_split(x3,y3,test_size=0.2)
    # md.fit(x_train, y_train)
    # md.predict([[42,43,10]])
    # md.score(x_test,y_test)
    # md.predict_proba(x_test)
    from sklearn import tree
    md = tree.DecisionTreeRegressor()
    md.fit(x_train,y_train)
    md.score(x_test,y_test)
    # from sklearn.svm import SVC
    # sv = SVC() #C=> regularization = distance
    # sv.fit(x_train,y_train)
    # sv.score(x_test,y_test)
    # md.predict([[42,43,10]])



    from sklearn.svm import SVR
    sv = SVR() #C=> regularization = distance
    sv.fit(x_train,y_train)
    sv.score(x_test,y_test)

    from sklearn.ensemble import RandomForestRegressor
    md = RandomForestRegressor()
    md.fit(x_train,y_train)
    md.score(x_test,y_test)
    document.getElementById("wild").innerHTML = md.predict(inputval)
    </py-script>
</body>
</html>